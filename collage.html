<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>College Finder</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link rel="stylesheet" href="style1.css">
<style>
body {
  font-family: "Poppins", sans-serif;
  background: linear-gradient(rgba(143,125,125,0.7), rgba(151,155,170,0.7)), url(bg4.jpg);
  background-size: cover;
  margin: 5%;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  color: #fff;
}



.container {
  width: 750px;
  background: rgba(0,0,0,0.65);
  padding: 25px;
  border-radius: 15px;
  margin-top: 40px;
}

h1 {
  text-align: center;
  color: #facc15;
}

label {
  display: block;
  margin-top: 15px;
  font-weight: bold;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
  font-size: 15px;
}

.button-row {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

button {
  flex: 1;
  padding: 12px;
  background: #f97316;
  border: none;
  border-radius: 8px;
  color: #fff;
  font-size: 16px;
  cursor: pointer;
  transition: 0.3s;
}

button:hover { background: #c2410c; }

#output {
  margin-top: 25px;
  padding: 15px;
  background: #fff;
  color: #000;
  border-radius: 10px;
  white-space: pre-wrap;
  max-height: 400px;
  overflow-y: auto;
  overflow-x: hidden;
  word-wrap: break-word;
}
</style>
</head>
<body>

   <header>
    <div class="nav-container">
      <div class="logo">Career<span style="color:var(--accent)">Path</span></div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="roadmap.html">Roadmaps</a></li>
          <li><a href="course.html">Courses</a></li>
          <li><a href="collage.html">colleges</a></li>
          <li><a href="contect.html">Contact</a></li>
          <li><a href="about.html">About Us</a></li>
        </ul>
      </nav>
      <!-- <a class="btn" href="#contact">Get Help</a> -->
      <a class="btn" href="javascript:void(0)" id="loginBtn" onclick="openModal()">Login</a>
      <a class="btn" href="javascript:void(0)" id="logoutBtn" onclick="logout()"
        style="display:none;background:#ef4444;">Logout</a>
    </div>
  </header>
<div class="container">
  <h1>üéì College Finder</h1>

  <label>Course</label>
  <input type="text" id="course" placeholder="e.g. B.Tech, BCA, MBA">

  <label>State</label>
  <input type="text" id="state" placeholder="e.g. Rajasthan, MP">

  <label>City</label>
  <input type="text" id="city" placeholder="e.g. Jaipur, Indore">

  <div class="button-row">
    <button onclick="findColleges()">üîç Find Colleges</button>
    <button onclick="downloadPDF()">üì• Download PDF</button>
  </div>

  <div id="output">Results will appear here...</div>
</div>

<script>
const API_KEY = "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";
const MODEL = "gpt-oss-120b";
const API_URL = "https://openrouter.ai/api/v1/chat/completions";

let latestResult = "";

async function findColleges() {
  const course = document.getElementById("course").value.trim();
  const state = document.getElementById("state").value.trim();
  const city = document.getElementById("city").value.trim();
  const output = document.getElementById("output");

  if (!course || !state || !city) {
    output.textContent = "‚ö†Ô∏è Please fill all fields!";
    return;
  }

  output.textContent = "‚è≥ Fetching data...";
  latestResult = "";

  const prompt = `List the top 10 colleges in ${city}, ${state}, India offering ${course}. 
Include for each:
1. College Name
2. Short Description
3. Scholarship Availability (Yes/No)
4. Scholarship Criteria (Merit, Need-based, Sports, etc.)
Format the response as a structured numbered list with clear headings for each college.`;

  try {
    const response = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${API_KEY}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: MODEL,
        messages: [{ role: "user", content: prompt }],
        max_output_tokens: 1200
      })
    });

    const data = await response.json();
    const text = data?.choices?.[0]?.message?.content || "No data found.";
    output.textContent = text;
    latestResult = text;

  } catch(err) {
    output.textContent = "‚ùå Error: " + err.message;
  }
}

function downloadPDF() {
  if (!latestResult) {
    alert("‚ö†Ô∏è Please fetch colleges first!");
    return;
  }

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  const course = document.getElementById("course").value.trim();
  const city = document.getElementById("city").value.trim();
  const state = document.getElementById("state").value.trim();

  doc.setFont("times", "normal");
  doc.setFontSize(12);
  doc.text(`Colleges & Scholarships for ${course} in ${city}, ${state}`, 10, 10);

  const lines = doc.splitTextToSize(latestResult, 180);
  let y = 20;
  lines.forEach(line => {
    if (y > doc.internal.pageSize.height - 20) {
      doc.addPage();
      y = 10;
    }
    doc.text(line, 10, y);
    y += 7;
  });

  doc.save(`Colleges_${city}_${course}.pdf`);
}
</script>
</body>
</html>
